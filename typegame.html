<!DOCTYPE html>
<html lang="zh-TW">

<head>
    <meta charset="UTF-8">
    <title>Ëã±ÊâìÁ∑¥ÁøíÈÅäÊà≤</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        :root {
            --primary-color: #4a90e2;
            --secondary-color: #50c878;
            --bg-gradient: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            --card-bg: rgba(255, 255, 255, 0.9);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            transition: all 0.3s ease;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: var(--bg-gradient);
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            overflow: hidden;
        }

        .game-container {
            background: var(--card-bg);
            border-radius: 20px;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.2);
            padding: 30px;
            width: 100%;
            max-width: 500px;
            text-align: center;
            position: relative;
            backdrop-filter: blur(10px);
            animation: float 4s ease-in-out infinite;
        }

        @keyframes float {

            0%,
            100% {
                transform: translateY(0);
            }

            50% {
                transform: translateY(-10px);
            }
        }

        h1 {
            color: var(--primary-color);
            margin-bottom: 20px;
            font-size: 2.5rem;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
        }

        #target-text {
            font-size: 1.5rem;
            color: #333;
            margin-bottom: 20px;
            background: linear-gradient(to right, #6a11cb 0%, #2575fc 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            font-weight: bold;
        }

        #input-text {
            width: 100%;
            padding: 12px;
            margin-bottom: 15px;
            border: 2px solid var(--primary-color);
            border-radius: 10px;
            font-size: 1.2rem;
            outline: none;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        #input-text:focus {
            border-color: var(--secondary-color);
            box-shadow: 0 0 10px rgba(80, 200, 120, 0.3);
        }

        .stats-container {
            display: flex;
            justify-content: space-between;
            margin-top: 20px;
        }

        .stat-box {
            background: linear-gradient(to right, #4a90e2, #50c878);
            color: white;
            padding: 10px;
            border-radius: 10px;
            flex-grow: 1;
            margin: 0 5px;
            text-align: center;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.2);
        }

        #highlight {
            margin-top: 10px;
            font-size: 1.2rem;
            min-height: 30px;
        }

        .correct {
            color: var(--secondary-color);
            animation: bounce 0.3s ease;
        }

        .incorrect {
            color: #ff6b6b;
            text-decoration: underline wavy;
            animation: shake 0.5s ease;
        }

        @keyframes bounce {

            0%,
            100% {
                transform: scale(1);
            }

            50% {
                transform: scale(1.1);
            }
        }

        @keyframes shake {

            0%,
            100% {
                transform: translateX(0);
            }

            10%,
            30%,
            50%,
            70%,
            90% {
                transform: translateX(-5px);
            }

            20%,
            40%,
            60%,
            80% {
                transform: translateX(5px);
            }
        }

        #result {
            margin-top: 15px;
            font-size: 1.2rem;
            font-weight: bold;
        }

        #error-log {
            background-color: rgba(255, 100, 100, 0.1);
            border-radius: 10px;
            padding: 10px;
            margin-top: 15px;
            max-height: 100px;
            overflow-y: auto;
        }

        .game-particles {
            position: absolute;
            pointer-events: none;
            z-index: -1;
        }

        @keyframes particle-float {
            0% {
                transform: translateY(0) rotate(0deg);
            }

            100% {
                transform: translateY(-100vh) rotate(360deg);
            }
        }

        .start-hint {
            color: var(--primary-color);
            animation: pulse 2s infinite;
        }

        @keyframes pulse {

            0%,
            100% {
                opacity: 1;
            }

            50% {
                opacity: 0.5;
            }
        }
    </style>
</head>

<body>
    <div class="game-container">
        <h1>ÊâìÂ≠óÂøçËÄÖ ü•∑</h1>
        <div id="start-hint" class="start-hint">ÈñãÂßãËº∏ÂÖ•Á¨¨‰∏ÄÂÄãÂ≠óÔºåÈÅäÊà≤Âç≥ÈñãÂßãÔºÅ</div>
        <div id="target-text"></div>
        <input type="text" id="input-text" placeholder="Âø´ÈÄüËº∏ÂÖ•...">
        <div id="highlight"></div>

        <div class="stats-container">
            <div class="stat-box">
                <i class="fas fa-clock"></i>
                ÊôÇÈñì: <span id="timer">60</span>Áßí
            </div>
            <div class="stat-box">
                <i class="fas fa-percentage"></i>
                Ê≠£Á¢∫Áéá: <span id="accuracy">100</span>%
            </div>
            <div class="stat-box">
                <i class="fas fa-keyboard"></i>
                Â≠óÊï∏: <span id="wpm">0</span> WPM
            </div>
        </div>

        <div id="error-log"></div>
        <div id="result"></div>
    </div>

    <script>
        const targetTextElement = document.getElementById('target-text');
        const inputTextElement = document.getElementById('input-text');
        const highlightElement = document.getElementById('highlight');
        const timerElement = document.getElementById('timer');
        const accuracyElement = document.getElementById('accuracy');
        const wpmElement = document.getElementById('wpm');
        const resultElement = document.getElementById('result');
        const startHintElement = document.getElementById('start-hint');
        const errorLogElement = document.getElementById('error-log');

        const sentences = [
            "The quick brown fox jumps over the lazy dog.",
            "I love programming and learning new things every day.",
            "Practice makes perfect in typing skills.",
            "Success is not final, failure is not fatal.",
            "Coding is an art of solving problems creatively."
        ];

        let currentSentence = '';
        let timeLeft = 60;
        let timer;
        let gameStarted = false;
        let totalErrors = 0;
        let errorPositions = new Set();

        function initGame() {
            // Èö®Ê©üÈÅ∏ÊìáÂè•Â≠ê
            currentSentence = sentences[Math.floor(Math.random() * sentences.length)];
            targetTextElement.textContent = currentSentence;

            // ÈáçÁΩÆÈÅäÊà≤ÁãÄÊÖã
            inputTextElement.value = '';
            inputTextElement.disabled = false;
            inputTextElement.focus();

            timeLeft = 60;
            timerElement.textContent = timeLeft;
            accuracyElement.textContent = '100';
            wpmElement.textContent = '0';
            resultElement.textContent = '';
            highlightElement.innerHTML = '';
            errorLogElement.innerHTML = '';
            startHintElement.style.display = 'block';

            gameStarted = false;
            totalErrors = 0;
            errorPositions.clear();

            clearInterval(timer);
        }

        function startTimer() {
            if (!gameStarted) {
                gameStarted = true;
                startHintElement.style.display = 'none';
                timer = setInterval(updateTimer, 1000);
            }
        }

        function updateTimer() {
            timeLeft--;
            timerElement.textContent = timeLeft;

            if (timeLeft <= 0) {
                endGame();
            }
        }

        function updateHighlight() {
            const inputText = inputTextElement.value;
            let highlightedText = '';
            let errorDescription = '';

            for (let i = 0; i < inputText.length; i++) {
                if (i < currentSentence.length) {
                    if (inputText[i] === currentSentence[i]) {
                        highlightedText += `<span class="correct">${inputText[i]}</span>`;
                    } else {
                        highlightedText += `<span class="incorrect">${inputText[i]}</span>`;

                        // Ë®òÈåÑÈåØË™§‰ΩçÁΩÆ
                        if (!errorPositions.has(i)) {
                            errorPositions.add(i);
                            totalErrors++;
                            errorDescription += `Á¨¨ ${i + 1} ÂÄãÂ≠óÈåØË™§ÔºöÊáâÁÇ∫ "${currentSentence[i]}"Ôºå‰Ω†Ëº∏ÂÖ•‰∫Ü "${inputText[i]}"<br>`;
                        }
                    }
                }
            }

            highlightElement.innerHTML = highlightedText;

            if (errorDescription) {
                errorLogElement.innerHTML = errorDescription;
            }
        }

        function calculateAccuracy() {
            // Ë®àÁÆóÊ∞∏‰πÖÈôç‰ΩéÁöÑÊ≠£Á¢∫Áéá
            const inputText = inputTextElement.value;
            const totalChars = Math.max(inputText.length, currentSentence.length);

            // Ê≠£Á¢∫Áéá = (Á∏ΩÂ≠óÁ¨¶ - ÈåØË™§Êï∏) / Á∏ΩÂ≠óÁ¨¶ * 100
            const accuracy = Math.max(0, Math.round(((totalChars - totalErrors) / totalChars) * 100));
            return accuracy;
        }

        function calculateWPM() {
            const inputText = inputTextElement.value;
            const words = inputText.trim().split(/\s+/);
            const timeTaken = (60 - timeLeft) / 60;  // ÊôÇÈñì‰ª•Â∞èÊôÇË®àÁÆó
            return Math.round(words.length / timeTaken);
        }

        function updateStats() {
            const accuracy = calculateAccuracy();
            const wpm = calculateWPM();

            accuracyElement.textContent = accuracy;
            wpmElement.textContent = wpm;
        }

        function endGame() {
            clearInterval(timer);
            inputTextElement.disabled = true;

            const accuracy = calculateAccuracy();
            const wpm = calculateWPM();

            accuracyElement.textContent = accuracy;
            wpmElement.textContent = wpm;

            if (accuracy > 80) {
                resultElement.textContent = `Â§™Ê£í‰∫ÜÔºÅ‰Ω†ÊâìÂæóÂæàÂ•ΩÔºÅ`;
                resultElement.style.color = 'green';
            } else {
                resultElement.textContent = `ÁπºÁ∫åÂä†Ê≤πÔºÅÈÇÑÊúâÈÄ≤Ê≠•Á©∫Èñì„ÄÇ`;
                resultElement.style.color = 'red';
            }
        }

        inputTextElement.addEventListener('input', function (e) {
            // Á¨¨‰∏ÄÊ¨°Ëº∏ÂÖ•ÊôÇÈñãÂßãË®àÊôÇ
            if (!gameStarted) {
                startTimer();
            }

            // Âç≥ÊôÇÊõ¥Êñ∞È´ò‰∫ÆÂíåÁµ±Ë®à
            updateHighlight();
            updateStats();

            // Ê™¢Êü•ÊòØÂê¶ÂÆåÊàêÊï¥ÂÄãÂè•Â≠ê
            if (e.target.value === currentSentence) {
                endGame();
            }
        });

        // ÈÅäÊà≤ÂàùÂßãÂåñ
        initGame();

        // ÈáçÊñ∞ÈñãÂßãÊåâÈàï
        document.addEventListener('keydown', function (event) {
            if (event.key === 'Enter') {
                initGame();
            }
        });
        function createParticles() {
            const container = document.body;

            // ÂâµÂª∫20ÂÄãÊºÇÊµÆÁ≤íÂ≠ê
            for (let i = 0; i < 20; i++) {
                const particle = document.createElement('div');
                particle.classList.add('game-particles');
                particle.style.position = 'fixed';
                particle.style.width = `${Math.random() * 10 + 5}px`;
                particle.style.height = particle.style.width;
                particle.style.background = `hsl(${Math.random() * 360}, 70%, 50%)`;
                particle.style.borderRadius = '50%';
                particle.style.left = `${Math.random() * 100}%`;
                particle.style.top = '100%';
                particle.style.opacity = Math.random();
                particle.style.animation = `particle-float ${Math.random() * 10 + 5}s linear infinite`;
                container.appendChild(particle);
            }
        }

        // Âú®ÈÅäÊà≤ÂàùÂßãÂåñÊôÇÂâµÂª∫Á≤íÂ≠ê
        createParticles();

        // Âú®ÈÅäÊà≤ÁµêÊùüÊôÇÊ∑ªÂä†ÂãùÂà©ÊàñÂ§±ÊïóÁöÑÁâπÊïà
        function addGameEndEffect(isVictory) {
            const container = document.querySelector('.game-container');
            const effectColor = isVictory ? '#50c878' : '#ff6b6b';

            container.style.boxShadow = `0 0 50px ${effectColor}`;
            container.style.transform = 'scale(1.05)';

            setTimeout(() => {
                container.style.boxShadow = '';
                container.style.transform = '';
            }, 1000);
        }
    </script>
</body>

</html>